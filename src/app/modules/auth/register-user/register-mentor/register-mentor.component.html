<div class="flex items-center justify-center min-h-screen bg-gray-100 py-2 px-1">
  <div class="w-full max-w-2xl p-8 bg-white rounded-2xl shadow-lg">
    <!-- Verifica se a tela é válida -->
    <ng-container *ngIf="screenValidated; else invalidScreen">
      <!-- Formulário -->
      <form
        [formGroup]="mentorForm"
        (ngSubmit)="handleSubmit()"
        class="space-y-4 flex flex-col gap-1.5"
      >
        <h2 class="text-3xl font-bold mb-8 text-center text-gray-800">Informações Pessoais</h2>

        <!-- Email -->
        <div>
          <p-floatlabel>
            <input
              pInputText
              formControlName="email"
              type="email"
              class="w-full"
              [readonly]="true"
            />
            <label>Email</label>
          </p-floatlabel>
        </div>

        <!-- Senha -->
        <div class="relative w-full">
          <p-floatlabel class="w-full">
            <input
              pInputText
              [type]="showPassword ? 'text' : 'password'"
              formControlName="password"
              autocomplete="off"
              class="w-full pr-20"
            />
            <label>Senha</label>
            <button
              type="button"
              class="absolute right-2 top-1/2 -translate-y-1/2 text-xs text-blue-600 hover:underline"
              (click)="togglePasswordVisibility()"
            >
              {{ showPassword ? 'Ocultar' : 'Mostrar' }}
            </button>
          </p-floatlabel>

          <!-- Texto pequeno para alternar -->

          <div
            *ngIf="passwordCtrl?.touched && passwordCtrl?.errors?.['required']"
            class="text-red-500 text-sm"
          >
            Campo obrigatório
          </div>
          <div
            *ngIf="
              (passwordCtrl?.touched || passwordCtrl?.dirty) && passwordCtrl?.errors?.['minlength']
            "
            class="text-red-500 text-sm"
          >
            Senha deve ter no mínimo 8 caracteres.
          </div>
          <div
            *ngIf="passwordCtrl?.touched && passwordCtrl?.errors?.['pattern']"
            class="text-red-500 text-sm"
          >
            A senha deve conter letra, número e caractere especial
          </div>
        </div>

        <!-- Nome -->
        <div>
          <p-floatlabel>
            <input pInputText formControlName="name" class="w-full" />
            <label>Nome</label>
          </p-floatlabel>
          <div
            *ngIf="f['name'].touched && f['name'].errors?.['required']"
            class="text-red-500 text-sm"
          >
            Campo obrigatório
          </div>
          <div
            *ngIf="f['name'].touched && f['name'].errors?.['maxlength']"
            class="text-red-500 text-sm"
          >
            Máximo de 50 caracteres
          </div>
        </div>

        <!-- Sobrenome -->
        <div>
          <p-floatlabel>
            <input pInputText formControlName="lastName" class="w-full" />
            <label>Sobrenome</label>
          </p-floatlabel>
          <div
            *ngIf="f['lastName'].touched && f['lastName'].errors?.['required']"
            class="text-red-500 text-sm"
          >
            Campo obrigatório
          </div>
          <div
            *ngIf="f['lastName'].touched && f['lastName'].errors?.['maxlength']"
            class="text-red-500 text-sm"
          >
            Máximo de 50 caracteres
          </div>
        </div>

        <!-- Data de nascimento -->
        <div>
          <p-floatlabel>
            <p-datepicker
              formControlName="birthDate"
              dateFormat="dd/mm/yy"
              [maxDate]="maxDate"
              [showIcon]="true"
              [readonlyInput]="true"
            ></p-datepicker>
            <label>Data de Nascimento</label>
          </p-floatlabel>
          <div
            *ngIf="f['birthDate'].touched && f['birthDate'].errors?.['required']"
            class="text-red-500 text-sm mt-1"
          >
            Campo obrigatório
          </div>
        </div>

        <!-- Telefone -->
        <div>
          <p-floatlabel>
            <input pInputText formControlName="phone" class="w-full" />
            <label>Telefone</label>
          </p-floatlabel>
          <div
            *ngIf="f['phone'].touched && f['phone'].errors?.['required']"
            class="text-red-500 text-sm mt-1"
          >
            Campo obrigatório
          </div>
          <div
            *ngIf="f['phone'].touched && f['phone'].errors?.['pattern']"
            class="text-red-500 text-sm mt-1"
          >
            Apenas números são permitidos
          </div>
          <div
            *ngIf="f['phone'].touched && f['phone'].errors?.['maxlength']"
            class="text-red-500 text-sm mt-1"
          >
            Máximo de 15 caracteres
          </div>
        </div>

        <!-- LinkedIn -->
        <div>
          <p-floatlabel>
            <input pInputText formControlName="socialMedias" class="w-full" />
            <label>LinkedIn</label>
          </p-floatlabel>
          <div
            *ngIf="f['socialMedias'].touched && f['socialMedias'].errors?.['maxlength']"
            class="text-red-500 text-sm mt-1"
          >
            Máximo de 100 caracteres
          </div>
        </div>

        <!-- Descrição -->
        <div>
          <p-floatlabel>
            <textarea
              pInputTextarea
              formControlName="description"
              rows="4"
              class="w-full"
              placeholder="Fale sobre você"
            ></textarea>
            <label>Descrição</label>
          </p-floatlabel>
          <div
            *ngIf="f['description'].touched && f['description'].errors?.['required']"
            class="text-red-500 text-sm mt-1"
          >
            Campo obrigatório
          </div>
          <div
            *ngIf="f['description'].touched && f['description'].errors?.['minlength']"
            class="text-red-500 text-sm mt-1"
          >
            Mínimo de 100 caracteres
          </div>
          <div
            *ngIf="f['description'].touched && f['description'].errors?.['maxlength']"
            class="text-red-500 text-sm mt-1"
          >
            Máximo de 500 caracteres
          </div>
        </div>

        <!-- Estado e Nacionalidade -->
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <p-floatlabel>
              <p-select
                formControlName="state"
                [options]="states"
                optionLabel="name"
                class="w-full"
              ></p-select>
              <label>Estado</label>
            </p-floatlabel>
            <div
              *ngIf="f['state'].touched && f['state'].errors?.['required']"
              class="text-red-500 text-sm mt-1"
            >
              Campo obrigatório
            </div>
          </div>
          <div>
            <p-floatlabel>
              <p-select
                formControlName="nationality"
                [options]="nationalities"
                optionLabel="name"
                class="w-full"
              ></p-select>
              <label>Nacionalidade</label>
            </p-floatlabel>
            <div
              *ngIf="f['nationality'].touched && f['nationality'].errors?.['required']"
              class="text-red-500 text-sm mt-1"
            >
              Campo obrigatório
            </div>
          </div>
        </div>

        <button
          type="submit"
          class="w-full py-3 px-4 bg-blue-600 text-white rounded-xl hover:bg-blue-700"
        >
          Enviar
        </button>
      </form>
    </ng-container>

    <!-- Tela inválida -->
    <ng-template #invalidScreen>
      <div class="text-center">
        <h2 class="text-2xl font-bold text-red-600">Tela inválida</h2>
        <p class="text-gray-700 mt-2">O token fornecido é inválido ou está ausente.</p>
      </div>
    </ng-template>
  </div>
</div>
